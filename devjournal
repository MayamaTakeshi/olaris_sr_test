---------------------------------------------------------------------
2021/09/19 takeshi:
  libjson-c samples: https://gist.github.com/alan-mushi/19546a0e2c6bd4e059fd

---------------------------------------------------------------------
2021/09/19 takeshi:

Prepared raw file this way:

```
$ soxi ohayou_gozaimasu.wav 

Input File     : 'ohayou_gozaimasu.wav'
Channels       : 1
Sample Rate    : 48000
Precision      : 16-bit
Duration       : 00:00:02.05 = 98400 samples ~ 153.75 CDDA sectors
File Size      : 197k
Bit Rate       : 768k
Sample Encoding: 16-bit Signed Integer PCM


$ sox ohayou_gozaimasu.wav -r 8000 -t raw -e signed --endian little ohayou_gozaimasu.r-8000.e-signed.b-16.c-1.raw

```

Confirmed it worked this way:
```

$ play -b16 -r 8000 -t raw -e signed --endian little ohayou_gozaimasu.r-8000.e-signed.b-16.c-1.raw
play WARN alsa: can't encode 0-bit Unknown or not applicable

ohayou_gozaimasu.r-8000.e-signed.b-16.c-1.raw:

 File Size: 32.8k     Bit Rate: 128k
  Encoding: Signed PCM    
  Channels: 1 @ 16-bit   
Samplerate: 8000Hz       
Replaygain: off         
  Duration: 00:00:02.05  

In:100%  00:00:02.05 [00:00:00.00] Out:16.4k [   ===|===   ]        Clip:0    
Done.

```
---------------------------------------------------------------------
2021/09/19 takeshi:

We prepared the code to read audio from file and send it to olaris but it is not working.
Probably we are generating the JSON data wrongly.

Here is sample from test with mrcp_server (where olaris works) for comparison:

{"type":"streamAudio","stream":[-8,0,0,0,0,8,0,0,0,-8,0,-8,0,0,-8,8,0,-8,0,0,8,0,8,0,0,0,8,0,0,8,0,8,0,0,-8,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,-8,-8,0,0,8,0,0,0,0,-8,-8,0,0,0,8,0,0,8,8,0,0,8,0,-8,0,0,0,-8,0,-
8,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,0,8,0,8,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,8,8,8,8,8,8,0,0,0,8,8,0,-8,0,-8,8,-8,-8,0,0,0,-8,0,0,0,-8,-8,0,0,0,8,8,0,0,8]}                                 
{"type":"streamAudio","stream":[0,0,8,8,0,-8,0,0,0,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,-8,0,0,0,8,8,8,8,8,0,8,8,8,0,0,0,0,0,0,0,8,8,-8,-8,-8,-8,0,0,-8,-8,0,-8,0,-8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16
,8,8,8,8,8,0,8,0,0,-8,0,-8,0,-8,-8,-8,0,-8,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,8,0,8,0,0,8,8,8,8,8,8,8,8,8,0,8,8,8,0,0,0,0,-8,0,8,0,0,-8,0,0,-8,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8]} 
{"type":"streamAudio","stream":[8,8,0,8,0,8,0,0,8,-8,0,0,0,0,-8,0,-8,-8,-8,-8,-8,0,-8,-8,-8,-8,-8,-8,0,-8,-8,0,0,-8,-8,0,-8,0,0,0,0,8,0,0,-8,0,0,0,0,8,8,-8,0,8,8,0,0,-8,0,-8,0,0,8,0,8,-8,0,8,8,8,8,8,8,8,
8,8,8,8,0,8,0,0,0,8,8,0,0,0,0,0,0,-8,-8,0,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0,0,-8,0,8,8,8,8,8,8,8,8,8,8,8,16,8,0,8,8,8,8,8,8,0,0,0,0,0,8,8,8,0,8,0,8,0,8,8,0,8,8,-8,-8,8,0,0,0,0,0]}          
{"type":"streamAudio","stream":[0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-16,-8,-8,-8,-8,0,0,0,-8,0,0,-8,0,0,8,0,0,0,0,0,0,0,0,8,0,0,0,0,0,8,0,8,0,8,8,-8,8,0,0,0,0,0,-8,-8,8,-8,-8,-8,-8,-8,-8,0,0,-8,-8,0,-8,-8,0,
0,0,8,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,0,8,0,0,0,8,8,8,0,0,0,0,0,-8,0,0,0,0,8,8,0,8,0,0,-8,8,0,0,0,0,8,8,0,8,8,8,0,0,0,-8,0,8,0,-8,0,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0]}
{"type":"streamAudio","stream":[8,0,0,0,8,0,8,0,0,0,8,0,8,8,8,0,0,8,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,-8,0,-8,0,-8,0,-8,0,-8,-8,0,0,0,0,-8,0,0,0,-8,0,0,-8,-8,-8,0,0,-8,0,0,0,0,0,0,0,-8,0,8,8,8,0,0,8,0,0,8,8,
0,0,0,0,0,-8,0,0,0,0,0,0,-8,0,-8,0,-8,-8,8,-8,-8,-8,-8,-8,-8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,8,0,8,0,0,0,0,0,-8,-8,-8,-8,-8,-8,-8,0,-8,-8,-8,0,0,0,-8,0,-8,0,0,-8,0,0,0,0,-8]}               
{"type":"streamAudio","stream":[-8,-8,-8,-8,-8,-8,-8,0,-8,-8,0,0,-8,-8,-8,0,-8,-8,0,0,0,0,-8,8,-8,0,0,0,0,-8,0,8,-8,0,0,0,0,0,-8,-8,-8,-8,0,-8,0,-8,-8,0,0,8,8,0,8,0,8,8,8,0,8,8,8,8,0,0,8,8,0,0,0,0,0,8,8,
8,8,0,0,0,-8,-8,-8,0,-8,-8,-8,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0,0,0,0,0,8,0,0,8,0,0,0,0,0,0,8,0,-8,0,0,-8,0,0,0,0,0,0,0,0,8,0,0,0,0,-8,0,0,0,-8,0,8,0,0,8,0,0,0,0,0,-8,0,0,0,0,0,-8,0]}
{"type":"streamAudio","stream":[0,-8,-8,-8,0,-8,-8,0,0,0,0,0,8,8,0,8,0,0,0,8,0,8,8,0,0,0,0,0,0,-8,0,0,-8,-8,-8,0,-8,-8,-8,-8,0,-8,0,0,0,8,0,0,0,0,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,-8,-8,-8,-8,0,
0,0,-8,0,0,0,0,0,-8,0,0,-8,8,0,0,0,0,-8,0,0,0,0,0,0,0,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,0,0,0,0,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,-8,-8,0,0,0,0,8,0,0,0,0,8,0,0,0,0,8,8,8,8,8,0]}       
{"type":"streamAudio","stream":[8,0,8,8,8,8,8,8,8,8,8,8,0,0,8,8,8,8,8,8,8,8,8,8,8,0,8,8,8,8,8,8,8,0,8,8,0,-8,0,-8,0,0,-8,-8,0,0,-8,-8,-8,0,-8,0,0,-8,-8,-8,-8,0,-8,-8,-8,-8,-8,0,0,-8,-8,0,-8,-8,-8,-8,-8,0
,0,0,0,-8,0,0,0,0,0,-8,8,-8,0,0,8,8,0,0,8,8,0,8,8,8,8,8,8,0,8,0,8,8,8,8,8,8,0,8,8,0,8,0,0,0,0,-8,-8,-8,0,-8,0,0,0,0,0,0,-8,0,0,-8,0,0,0,0,0,0,0,0,0,-8,0,0,0,-8,0,0,-8,-8,0,8,0,0,8,0,0,0]}                
{"type":"streamAudio","stream":[0,0,0,8,0,0,0,0,0,8,8,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,0,0,-8,-8,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8
,8,0,0,8,0,8,8,8,8,8,8,8,8,0,0,-8,0,0,0,0,8,-8,0,-8,0,-8,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,8,0,8,8,0,0,0,0,0,0,0,-8,-8,-8,-8,-8,-8,-8,-8,0,-8,-8,0,0,-8,-8,-8,0,0]}                  
{"type":"streamAudio","stream":[-8,0,-8,8,0,0,8,8,0,8,0,0,0,0,8,0,0,0,0,0,0,8,0,0,8,0,0,8,0,0,8,8,0,8,0,0,8,0,8,0,0,0,8,8,8,8,0,0,8,0,0,0,0,-8,-8,0,-8,8,0,-8,-8,0,0,-8,0,0,0,0,8,8,0,0,0,0,8,8,8,0,8,0,8,8
,0,8,0,0,8,0,0,8,0,0,8,8,8,0,0,0,0,0,0,0,8,0,0,0,0,-8,0,-8,0,0,-8,0,-8,0,0,-8,-8,0,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,0]}                
{"type":"streamAudio","stream":[0,0,8,0,0,-8,-8,0,-8,-8,-8,-8,-8,-8,-16,-8,-8,-8,-8,0,0,0,-8,-8,-8,-8,-8,-8,0,0,-8,0,0,8,8,0,0,0,8,8,8,-8,0,0,8,0,-8,8,0,8,0,0,-8,0,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-
8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0,0,-8,0,0,8,0,8,8,0,0,0,8,0,8,0,0,0,0,0,0,-8,-8,-8,0,-8,0,-8,-8,-8,-8,-8,0,0,-8,0,-8,-8,0,-8,0,8,0,8,8,8,0,8,0,0,8,-8,8,8,8,0,8,8,8,8,8,0,0,8,0,0,0,0,8,8,0,
0,0,0,0,-8,-8]}                                                                                                                                                                                            
{"type":"streamAudio","stream":[-8,0,-8,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,0,8,0,8,0,0,-8,-8,0,-8,0,8,-8,-8,-8,-8,-8,0,-8,0,-8,0,8,0,8,0,0,8,8,0,8,8,0,0,8,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,0,0,8,8,0,0,8,-8,-
8,-8,0,0,0,0,0,0,0,0,-8,0,-8,0,0,-8,-8,-8,-8,-8,0,8,-8,8,0,8,0,8,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,8,8,8,8,8,0,0,0,0,-8,0,0,0,0,-8,0,0,0,0,0,-8,0,-8,-8,0,0,0,0,0,0,0,0,0,0,8,0,8,8]}                
{"type":"streamAudio","stream":[0,0,0,0,8,8,0,8,0,8,0,0,-8,0,0,-8,-8,-8,0,-8,0,0,0,-8,0,0,-8,-8,-8,-8,-8,-8,0,-8,0,0,-8,-8,-8,0,0,0,0,-8,-8,0,-8,-8,0,0,0,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0,-8,0,8,
0,0,0,0,0,-8,0,8,0,0,8,0,0,8,8,8,8,8,8,0,8,8,8,8,0,8,8,0,0,8,8,8,8,8,0,8,8,8,0,0,0,0,-8,-8,0,-8,0,-8,0,0,0,0,0,0,0,0,0,-8,0,-8,-8,-8,0,-8,-8,-8,-8,0,-8,-8,0,-8,-8,0,-8,-8,-8,0,-8,0,0,-8,0,0,0,0,0,0,0,-8,
0]}                                                                                                                                                                                                        
{"type":"streamAudio","stream":[0,0,-8,0,0,0,0,0,0,8,0,0,-8,8,0,0,0,8,8,8,8,0,8,0,0,0,0,0,0,-8,8,0,-8,0,0,0,0,0,0,8,-8,0,8,0,0,-8,-8,8,0,0,0,8,-8,0,-8,0,-8,0,0,0,0,0,8,0,0,8,0,0,8,0,0,0,0,8,0,-8,0,0,0,0,
0,0,0,0,-8,0,-8,0,0,0,0,8,8,0,8,8,0,8,8,8,8,8,8,8,0,8,0,0,8,-8,-8,0,-8,-8,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,8,0,0,0,0,0,8,8,8,0,0,8,8,8,8,8,8,8,0,8,8,0,8,0,0,0,0,8,0]}                     
{"type":"streamAudio","stream":[8,0,0,0,0,0,0,0,0,0,0,0,0,0,-8,0,0,-8,-8,0,-8,-8,-8,-8,0,0,-8,-8,0,-8,-8,0,0,8,8,8,0,0,-8,0,0,0,8,0,0,-8,0,0,-8,0,0,0,0,-8,8,-8,0,0,0,0,0,8,0,0,0,0,0,0,8,8,-8,0,0,0,-8,8,0
,8,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,-8,8,0,0,0,-8,0,0,-8,0,0,0,0,-8,0,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,-8,-8,-8,0,-8,0,0,-8,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,0,8,-8,0,-8,0,0,-8,-8,0]}            
{"type":"streamAudio","stream":[-8,-8,-8,0,-8,0,-8,-8,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,0,0,0,0,0,-8,8,8,0,8,0,8,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,-8,-8,0,0,0,-8,-8,-8
,8,8,0,-8,0,-8,-8,0,0,-8,0,-8,8,0,0,0,-8,0,0,-8,0,0,0,-8,0,0,8,-8,-8,0,8,8,8,8,8,8,8,8,8,8,8,8,0,8,0,0,8,0,0,-8,0,0,-8,0,-8,-8,-8,0,-8,-8,-8,-8,0,0,0,0,0,0,8,0,8,0,8,0,8,0,0,0,0,8,0,0,0,0,0]}
{"type":"streamAudio","stream":[0,0,0,0,0,0,8,8,8,0,0,8,0,0,0,0,8,8,0,8,8,8,8,8,8,0,8,0,8,8,0,0,8,8,0,8,0,0,0,0,-8,0,8,0,8,8,0,-8,0,0,8,8,0,8,0,0,-8,-8,0,-8,-8,0,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8
,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-16,-8,-8,-8,-8,0,8,8,8,8,8,8,8,8,0,0,0,8,0,-8,0,-8,8,0,-8,0,8,-8,-16,-16,-24,-24,-16,-16,-16,-8,-8,-8,-8,-16,-24,-24,-24,-24,-16,-8,-16,-8,0,0,-8,-8,-16,-16,-16,-16,
-8,-16,-8,8,0,0,0,0,-8,0,-8,0,8,16,8,8]}
{"type":"streamAudio","stream":[0,0,-8,-16,-24,-16,16,8,8,24,16,16,24,24,-8,8,8,0,-8,-8,-24,-16,24,16,0,-8,24,24,16,16,24,24,16,32,56,96,132,112,48,-56,-64,-64,-40,16,48,72,132,180,180,180,180,180,164,64
,-132,-228,-244,-132,24,132,148,164,164,212,276,292,308,228,132,104,-8,-88,-212,-308,-260,-132,96,324,524,372,524,844,1244,1372,1180,812,340,96,-96,-16,48,196,228,212,72,-56,-196,-244,-228,-180,-112,-132
,-180,-228,-276,-260,-228,-196,-88,-80,8,-24,8,-24,-8,-8,32,-16,88,748,1564,2236,2364,1692,652,-308,-924,-1052,-780,-356,0,104,-8,-244,-460,-588,-556,-396,-212,-96,-64,-132,-212,-244,-196,-88,24,112,148,
164,120,120,72,132,64,148,-16,428,1564,2748]}
{"type":"streamAudio","stream":[3516,3004,1756,-212,-1628,-2364,-2236,-1500,-780,-164,-88,-180,-460,-652,-716,-588,-324,-104,72,72,8,-64,-48,56,180,276,324,276,260,180,196,132,180,96,132,-32,244,1756,351
6,4860,4604,2748,-132,-2620,-4092,-4092,-3004,-1980,-844,-428,-292,-356,-428,-396,-372,-196,-8,164,244,196,148,148,276,428,524,556,396,292,164,164,132,196,104,132,-104,396,2108,3900,5116,4348,2108,-876,-
3132,-4092,-4092,-3004,-2108,-1116,-716,-396,-228,-88,16,32,104,164,212,228,148,164,196,372,492,588,524,396,260,148,132,96,132,56,80,-132,876,2620,4604,5116,3516,1116,-1756,-3388,-4092,-3772,-2876,-1980,
-1308,-876,-460,-212,80,196,244,292,276,260,212,148,180,260,460,556,620,492,396,244,196,104,132,48,56,-120,132,1756,3516,5116,4348,2364,-340,-2620]}

---------------------------------------------------------------------
2021/09/20 takeshi:

Issue was solved:

takeshi:olaris_sr_test$ ./olaris_test ~/tmp/olaris.json konnichiwa.r-8000.b-16.c-1.e-signed.endian-little.raw 
... ABRIDGED ...
callback_http with reason=8
{"type": "decoding", "result": "", "raw": ""}
decoding
callback_http with reason=8
{"type": "decoding", "result": "\u3053\u3093\u306b\u3061\u306f", "raw": "\u3053\u3093\u306b\u3061\u306f+\u611f\u52d5\u8a5e "}
decoding
callback_http with reason=8
{"type": "decoding", "result": "\u3053\u3093\u306b\u3061\u306f", "raw": "\u3053\u3093\u306b\u3061\u306f+\u611f\u52d5\u8a5e "}
decoding
callback_http with reason=8
{"type": "decoding", "result": "\u3053\u3093\u306b\u3061\u306f", "raw": "\u3053\u3093\u306b\u3061\u306f+\u611f\u52d5\u8a5e "}
decoding
^C
takeshi:olaris_sr_test$ 

If we pass the result to a decoder like this:
  https://www.online-toolz.com/tools/text-unicode-entities-convertor.php

we get:
  \u3053\u3093\u306b\u3061\u306f => こんにちは


However, the test must be adjusted to send the data periodically instead of multiple WebSocket messages at once as we get this for large files:

takeshi:olaris_sr_test$ ./olaris_test ~/tmp/olaris.json konnichiwa-pad.r-8000.b-16.c-1.e-signed.endian-little.raw 
... ABRIDGED ...

data_len=1024
{"type": "streamAudio", "stream": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}
msg_len=1060
data_len=1024
{"type": "streamAudio", "stream": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}
msg_len=1060
data_len=1024
{"type": "streamAudio", "stream": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}
msg_len=1060
[2021/09/20 12:48:44:2251] E: ERROR 0 writing to ws socket

---------------------------------------------------------------------
2021/09/20 takeshi:

Outputting unicode:

1) char by char:
takeshi:tmp$ cat a.c 
#include <stdio.h>
#include <wchar.h>
#include <locale.h>

int main() {
    setlocale(LC_CTYPE, "");
    // こんにちは
    wchar_t word[] = {0x3053, 0x3093, 0x306b, 0x3061, 0x306f};
    for(int i=0 ; i < 5 ; i++) {
      wprintf(L"%lc", word[i]);
    }
    wprintf(L"\n");
}

takeshi:tmp$ gcc a.c

takeshi:tmp$ ./a.out 
こんにちは


2) array:
takeshi:olaris_sr_test$ cat b.c 
#include <stdio.h>
#include <stdlib.h>
#include <locale.h>
#include <wchar.h>

int main(void)
{
    wchar_t *s;
    wchar_t word[] = {0x3053, 0x3093, 0x306b, 0x3061, 0x306f, 0x00};
 
    setlocale(LC_ALL, "");

    if (printf("%ls\n", word) < 0) {
        perror("printf");
    }
} 

takeshi:olaris_sr_test$ gcc b.c 

takeshi:olaris_sr_test$ ./a.out 
こんにちは


